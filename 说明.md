# Java è®¡ç®—å™¨ä»£ç è¯¦è§£æ‰‹å†Œï¼ˆæ–°æ‰‹ç‰ˆï¼‰

> ğŸ“˜ æœ¬æ‰‹å†Œä¸“ä¸º Java åˆå­¦è€…ç¼–å†™ï¼Œè¯¦ç»†è®²è§£æ¯ä¸ªç±»ã€æ–¹æ³•çš„å·¥ä½œåŸç†å’Œå®ç°ç»†èŠ‚ã€‚

---

## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ•´ä½“æ¶æ„](#é¡¹ç›®æ•´ä½“æ¶æ„)
2. [æ ¸å¿ƒæ¦‚å¿µè®²è§£](#æ ¸å¿ƒæ¦‚å¿µè®²è§£)
3. [CasioCalculator ä¸»ç±»è¯¦è§£](#casiocalculator-ä¸»ç±»è¯¦è§£)
4. [CalculatorEngine è®¡ç®—å¼•æ“è¯¦è§£](#calculatorengine-è®¡ç®—å¼•æ“è¯¦è§£)
5. [MatrixCalculator çŸ©é˜µè®¡ç®—å™¨è¯¦è§£](#matrixcalculator-çŸ©é˜µè®¡ç®—å™¨è¯¦è§£)
6. [GraphPlotter å›¾å½¢ç»˜åˆ¶å™¨è¯¦è§£](#graphplotter-å›¾å½¢ç»˜åˆ¶å™¨è¯¦è§£)
7. [å…³é”®æŠ€æœ¯æ·±å…¥è§£æ](#å…³é”®æŠ€æœ¯æ·±å…¥è§£æ)
8. [å®æˆ˜ç»ƒä¹ ](#å®æˆ˜ç»ƒä¹ )

---

## é¡¹ç›®æ•´ä½“æ¶æ„

### ğŸ—ï¸ MVC è®¾è®¡æ¨¡å¼

æœ¬é¡¹ç›®é‡‡ç”¨ MVCï¼ˆModel-View-Controllerï¼‰è®¾è®¡æ¨¡å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç”¨æˆ·ç•Œé¢ (View)                 â”‚
â”‚            CasioCalculator.java                 â”‚
â”‚  - æ˜¾ç¤ºå±ã€æŒ‰é’®ã€é€‰é¡¹å¡                          â”‚
â”‚  - å¤„ç†ç”¨æˆ·è¾“å…¥ï¼ˆç‚¹å‡»ã€è¾“å…¥ï¼‰                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ§åˆ¶å™¨ (Controller)                 â”‚
â”‚            CasioCalculator.java                 â”‚
â”‚  - handleButtonClick() å¤„ç†æŒ‰é’®äº‹ä»¶              â”‚
â”‚  - åè°ƒ View å’Œ Model                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ¨¡å‹ (Model)                      â”‚
â”‚  â”œâ”€ CalculatorEngine.java (è®¡ç®—é€»è¾‘)            â”‚
â”‚  â”œâ”€ MatrixCalculator.java (çŸ©é˜µè¿ç®—)            â”‚
â”‚  â””â”€ GraphPlotter.java (å›¾å½¢ç»˜åˆ¶)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“¦ ç±»ä¹‹é—´çš„å…³ç³»

```java
CasioCalculator (ä¸»ç±»)
    â”œâ”€â”€ æŒæœ‰ â†’ CalculatorEngine (è®¡ç®—å¼•æ“)
    â”œâ”€â”€ ä½¿ç”¨ â†’ MatrixCalculator (çŸ©é˜µè®¡ç®—)
    â””â”€â”€ åˆ›å»º â†’ GraphPlotter (å›¾å½¢ç»˜åˆ¶)
```

---

## æ ¸å¿ƒæ¦‚å¿µè®²è§£

### 1. Java Swing åŸºç¡€

**Swing æ˜¯ä»€ä¹ˆï¼Ÿ**
- Java çš„ GUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰å·¥å…·åŒ…
- ç”¨äºåˆ›å»ºçª—å£ã€æŒ‰é’®ã€æ–‡æœ¬æ¡†ç­‰å¯è§†åŒ–ç»„ä»¶

**æ ¸å¿ƒç»„ä»¶ï¼š**

```java
// JFrame: çª—å£å®¹å™¨ï¼ˆæœ€å¤–å±‚ï¼‰
JFrame frame = new JFrame("æ ‡é¢˜");

// JPanel: é¢æ¿å®¹å™¨ï¼ˆç”¨äºç»„ç»‡ç»„ä»¶ï¼‰
JPanel panel = new JPanel();

// JButton: æŒ‰é’®
JButton button = new JButton("ç‚¹å‡»æˆ‘");

// JTextArea: å¤šè¡Œæ–‡æœ¬æ¡†
JTextArea textArea = new JTextArea();

// JTextField: å•è¡Œæ–‡æœ¬æ¡†
JTextField textField = new JTextField();
```

### 2. å¸ƒå±€ç®¡ç†å™¨

**å¸ƒå±€ç®¡ç†å™¨å†³å®šç»„ä»¶å¦‚ä½•æ’åˆ—ï¼š**

```java
// BorderLayout: è¾¹ç•Œå¸ƒå±€ï¼ˆä¸Šä¸‹å·¦å³ä¸­ï¼‰
new BorderLayout()
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      NORTH       â”‚
â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤
â”‚WESTâ”‚ CENTER â”‚EASTâ”‚
â”œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¤
â”‚      SOUTH       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// GridLayout: ç½‘æ ¼å¸ƒå±€ï¼ˆmè¡Œnåˆ—ï¼‰
new GridLayout(3, 3)  // 3è¡Œ3åˆ—
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ 1 â”‚ 2 â”‚ 3 â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚ 4 â”‚ 5 â”‚ 6 â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚ 7 â”‚ 8 â”‚ 9 â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
```

### 3. äº‹ä»¶å¤„ç†

**Java ä¸­çš„äº‹ä»¶é©±åŠ¨ç¼–ç¨‹ï¼š**

```java
// ç”¨æˆ·ç‚¹å‡»æŒ‰é’® â†’ è§¦å‘äº‹ä»¶ â†’ æ‰§è¡Œå¤„ç†æ–¹æ³•

button.addActionListener(e -> {
    // è¿™é‡Œçš„ä»£ç åœ¨æŒ‰é’®è¢«ç‚¹å‡»æ—¶æ‰§è¡Œ
    System.out.println("æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼");
});
```

**Lambda è¡¨è¾¾å¼ç®€åŒ–å†™æ³•ï¼š**

```java
// ä¼ ç»Ÿå†™æ³•ï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("ç‚¹å‡»");
    }
});

// Lambda è¡¨è¾¾å¼ï¼ˆJava 8+ï¼‰
button.addActionListener(e -> System.out.println("ç‚¹å‡»"));
```

---

## CasioCalculator ä¸»ç±»è¯¦è§£

### ğŸ“‹ ç±»æˆå‘˜å˜é‡

```java
public class CasioCalculator extends JFrame {
    // æ˜¾ç¤ºå± - æ˜¾ç¤ºè®¡ç®—è¿‡ç¨‹å’Œç»“æœ
    private JTextArea display;
    
    // é€‰é¡¹å¡é¢æ¿ - åˆ‡æ¢ä¸åŒåŠŸèƒ½æ¨¡å¼
    private JTabbedPane tabbedPane;
    
    // è®¡ç®—å¼•æ“ - å¤„ç†æ‰€æœ‰è®¡ç®—é€»è¾‘
    private CalculatorEngine engine;
    
    // çŠ¶æ€æ ‡ç­¾ - æ˜¾ç¤ºå½“å‰çŠ¶æ€ï¼ˆè§’åº¦æ¨¡å¼ã€å†…å­˜ç­‰ï¼‰
    private JLabel statusLabel;
    
    // çŸ©é˜µè¾“å…¥æ¡† - å­˜å‚¨çŸ©é˜µ A å’Œ B çš„è¾“å…¥å­—æ®µ
    private JTextField[][] matrixAFields;  // 3Ã—3 çŸ©é˜µ
    private JTextField[][] matrixBFields;  // 3Ã—3 çŸ©é˜µ
}
```

**ä¸ºä»€ä¹ˆç”¨ `private`ï¼Ÿ**
- å°è£…åŸåˆ™ï¼šå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®ï¼Œåªèƒ½é€šè¿‡æ–¹æ³•
- æ•°æ®å®‰å…¨ï¼šé˜²æ­¢è¢«æ„å¤–ä¿®æ”¹

### ğŸ—ï¸ æ„é€ å‡½æ•°

```java
public CasioCalculator() {
    // 1. åˆ›å»ºè®¡ç®—å¼•æ“å®ä¾‹
    engine = new CalculatorEngine();
    
    // 2. åˆå§‹åŒ–çŸ©é˜µè¾“å…¥æ¡†æ•°ç»„ï¼ˆ3Ã—3ï¼‰
    matrixAFields = new JTextField[3][3];
    matrixBFields = new JTextField[3][3];
    
    // 3. åˆå§‹åŒ–ç”¨æˆ·ç•Œé¢
    initializeUI();
}
```

**æ‰§è¡Œæµç¨‹ï¼š**
```
åˆ›å»º CasioCalculator å¯¹è±¡
    â†“
new CalculatorEngine() â†’ åˆ›å»ºè®¡ç®—å¼•æ“
    â†“
åˆå§‹åŒ–æ•°ç»„ â†’ åˆ†é…å†…å­˜ç©ºé—´
    â†“
initializeUI() â†’ æ„å»ºæ•´ä¸ªç•Œé¢
```

### ğŸ¨ initializeUI() - ç•Œé¢åˆå§‹åŒ–

```java
private void initializeUI() {
    // 1. è®¾ç½®çª—å£åŸºæœ¬å±æ€§
    setTitle("CASIO fx-991CN X - Java Edition");  // çª—å£æ ‡é¢˜
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // å…³é—­æ“ä½œ
    setSize(1000, 750);                            // çª—å£å¤§å°
    setLocationRelativeTo(null);                   // å±…ä¸­æ˜¾ç¤º
    
    // 2. åˆ›å»ºä¸»é¢æ¿
    JPanel mainPanel = new JPanel(new BorderLayout(10, 10));
    mainPanel.setBackground(new Color(40, 40, 40));  // æ·±ç°èƒŒæ™¯
    mainPanel.setBorder(new EmptyBorder(15, 15, 15, 15)); // å†…è¾¹è·
    
    // 3. æ·»åŠ ç»„ä»¶åˆ°ä¸»é¢æ¿
    mainPanel.add(createTopBar(), BorderLayout.NORTH);    // é¡¶éƒ¨æ 
    mainPanel.add(createDisplay(), BorderLayout.CENTER);  // æ˜¾ç¤ºå±
    
    // 4. åˆ›å»ºé€‰é¡¹å¡
    tabbedPane = new JTabbedPane();
    tabbedPane.addTab("æ™®é€šè®¡ç®—", createNormalPanel());
    tabbedPane.addTab("çŸ©é˜µè¿ç®—", createMatrixPanel());
    tabbedPane.addTab("æ–¹ç¨‹æ±‚è§£", createEquationPanel());
    tabbedPane.addTab("å‡½æ•°ç»˜å›¾", createGraphPanel());
    
    mainPanel.add(tabbedPane, BorderLayout.SOUTH);  // æ·»åŠ åˆ°åº•éƒ¨
    
    // 5. å°†ä¸»é¢æ¿æ·»åŠ åˆ°çª—å£
    add(mainPanel);
}
```

**BorderLayout ä½ç½®è¯´æ˜ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NORTH (é¡¶éƒ¨æ )                â”‚  â† createTopBar()
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚
â”‚   CENTER (æ˜¾ç¤ºå±)               â”‚  â† createDisplay()
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   SOUTH (é€‰é¡¹å¡é¢æ¿)            â”‚  â† tabbedPane
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ createTopBar() - åˆ›å»ºé¡¶éƒ¨æ 

```java
private JPanel createTopBar() {
    // 1. åˆ›å»ºé¢æ¿ï¼Œä½¿ç”¨ BorderLayout
    JPanel panel = new JPanel(new BorderLayout());
    panel.setBackground(new Color(20, 50, 100));  // è“è‰²èƒŒæ™¯
    panel.setBorder(new EmptyBorder(12, 20, 12, 20));  // å†…è¾¹è·
    
    // 2. åˆ›å»ºå“ç‰Œæ ‡ç­¾ï¼ˆå·¦ä¾§ï¼‰
    JLabel brand = new JLabel("CASIO fx-991CN X");
    brand.setFont(new Font("Arial", Font.BOLD, 20));
    brand.setForeground(Color.WHITE);  // ç™½è‰²æ–‡å­—
    
    // 3. åˆ›å»ºçŠ¶æ€æ ‡ç­¾ï¼ˆå³ä¾§ï¼‰
    statusLabel = new JLabel("DEG | M: 0");
    statusLabel.setFont(new Font("Consolas", Font.PLAIN, 12));
    statusLabel.setForeground(new Color(150, 200, 255));  // æµ…è“è‰²
    
    // 4. æ·»åŠ åˆ°é¢æ¿
    panel.add(brand, BorderLayout.WEST);      // å·¦ä¾§
    panel.add(statusLabel, BorderLayout.EAST); // å³ä¾§
    
    return panel;
}
```

**æ•ˆæœå›¾ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CASIO fx-991CN X          DEG | M: 0     â”‚
â”‚ â†â”€â”€â”€â”€â”€å·¦ä¾§â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€å³ä¾§â”€â”€â”€â”€â”€â†’  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“º createDisplay() - åˆ›å»ºæ˜¾ç¤ºå±

```java
private JScrollPane createDisplay() {
    // 1. åˆ›å»ºæ–‡æœ¬åŒºåŸŸï¼ˆ4è¡Œï¼Œ40åˆ—ï¼‰
    display = new JTextArea(4, 40);
    
    // 2. è®¾ç½®æ˜¾ç¤ºå±æ€§
    display.setFont(new Font("Consolas", Font.BOLD, 22));
    display.setBackground(new Color(180, 255, 180));  // æµ…ç»¿è‰²ï¼ˆLCDé£æ ¼ï¼‰
    display.setForeground(new Color(0, 60, 0));       // æ·±ç»¿è‰²æ–‡å­—
    display.setEditable(true);                        // å¯ç¼–è¾‘
    display.setText("0");                             // åˆå§‹æ˜¾ç¤º 0
    display.setLineWrap(true);                        // è‡ªåŠ¨æ¢è¡Œ
    display.setMargin(new Insets(10, 15, 10, 15));   // æ–‡å­—è¾¹è·
    
    // 3. æ·»åŠ æ»šåŠ¨æ¡
    JScrollPane scrollPane = new JScrollPane(display);
    scrollPane.setBorder(new LineBorder(new Color(0, 100, 0), 4));
    
    return scrollPane;
}
```

**Insets è¾¹è·è¯´æ˜ï¼š**
```java
new Insets(ä¸Š, å·¦, ä¸‹, å³)
new Insets(10, 15, 10, 15)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† 15 â†’          â”‚ â†‘ 10
â”‚         æ–‡å­—      â”‚
â”‚                  â”‚ â†“ 10
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”¢ createNormalPanel() - åˆ›å»ºæ™®é€šè®¡ç®—é¢æ¿

```java
private JPanel createNormalPanel() {
    // 1. åˆ›å»ºä¸»é¢æ¿
    JPanel panel = new JPanel(new BorderLayout(8, 8));
    panel.setBackground(new Color(40, 40, 40));
    panel.setBorder(new EmptyBorder(12, 12, 12, 12));
    
    // 2. åˆ›å»ºæŒ‰é’®é¢æ¿ï¼ˆ8è¡Œ5åˆ—ç½‘æ ¼ï¼‰
    JPanel buttonsPanel = new JPanel(new GridLayout(8, 5, 6, 6));
    buttonsPanel.setBackground(new Color(40, 40, 40));
    
    // 3. å®šä¹‰æ‰€æœ‰æŒ‰é’®å¸ƒå±€
    String[][] allButtons = {
        // ç¬¬1è¡Œï¼šä¸‰è§’å‡½æ•°å’ŒåŸºæœ¬å‡½æ•°
        {"sin", "cos", "tan", "âˆš", "xÂ²"},
        
        // ç¬¬2è¡Œï¼šå¯¹æ•°å’ŒæŒ‡æ•°å‡½æ•°
        {"ln", "log", "eË£", "|x|", "x!"},
        
        // ç¬¬3è¡Œï¼šæ‹¬å·å’Œå¸¸æ•°
        {"(", ")", "Ï€", "e", "^"},
        
        // ç¬¬4è¡Œï¼šæ¸…é™¤å’ŒåŸºæœ¬è¿ç®—
        {"AC", "DEL", "ANS", "Ã·", "%"},
        
        // ç¬¬5-8è¡Œï¼šæ•°å­—é”®ç›˜
        {"7", "8", "9", "Ã—", "1/x"},
        {"4", "5", "6", "-", "xÂ³"},
        {"1", "2", "3", "+", "âˆ›"},
        {"0", ".", "(âˆ’)", "=", "EXP"}
    };
    
    // 4. åˆ›å»ºæ‰€æœ‰æŒ‰é’®
    for (String[] row : allButtons) {
        for (String text : row) {
            // æ ¹æ®æ–‡æœ¬ç¡®å®šæŒ‰é’®ç±»å‹
            ButtonType type = determineButtonType(text);
            // åˆ›å»ºå¹¶æ·»åŠ æŒ‰é’®
            buttonsPanel.add(createStyledButton(text, type));
        }
    }
    
    panel.add(buttonsPanel, BorderLayout.CENTER);
    
    // 5. åˆ›å»ºå†…å­˜æ“ä½œæŒ‰é’®è¡Œ
    JPanel memoryPanel = new JPanel(new GridLayout(1, 5, 6, 6));
    String[] memButtons = {"MC", "MR", "M+", "M-", "MS"};
    for (String text : memButtons) {
        memoryPanel.add(createStyledButton(text, ButtonType.MEMORY));
    }
    panel.add(memoryPanel, BorderLayout.SOUTH);
    
    return panel;
}
```

**æŒ‰é’®å¸ƒå±€å¯è§†åŒ–ï¼š**
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚sin â”‚cos â”‚tan â”‚ âˆš  â”‚ xÂ² â”‚  ç¬¬1è¡Œï¼šç§‘å­¦å‡½æ•°
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ ln â”‚log â”‚ eË£ â”‚|x| â”‚ x! â”‚  ç¬¬2è¡Œï¼šå¯¹æ•°æŒ‡æ•°
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ (  â”‚ )  â”‚ Ï€  â”‚ e  â”‚ ^  â”‚  ç¬¬3è¡Œï¼šæ‹¬å·å¸¸æ•°
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ AC â”‚DEL â”‚ANS â”‚ Ã·  â”‚ %  â”‚  ç¬¬4è¡Œï¼šç‰¹æ®ŠåŠŸèƒ½
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 7  â”‚ 8  â”‚ 9  â”‚ Ã—  â”‚1/x â”‚  ç¬¬5è¡Œ
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 4  â”‚ 5  â”‚ 6  â”‚ -  â”‚ xÂ³ â”‚  ç¬¬6è¡Œ
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ 2  â”‚ 3  â”‚ +  â”‚ âˆ›  â”‚  ç¬¬7è¡Œ
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ .  â”‚(âˆ’) â”‚ =  â”‚EXP â”‚  ç¬¬8è¡Œ
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

### ğŸ¨ determineButtonType() - ç¡®å®šæŒ‰é’®ç±»å‹

```java
private ButtonType determineButtonType(String text) {
    // 1. æ•°å­—å’Œå°æ•°ç‚¹ â†’ æ•°å­—é”®
    if (text.matches("[0-9.]")) {
        return ButtonType.NUMBER;
    }
    
    // 2. ç­‰å· â†’ ç­‰å·é”®
    if (text.equals("=")) {
        return ButtonType.EQUALS;
    }
    
    // 3. åŸºæœ¬è¿ç®—ç¬¦ â†’ è¿ç®—ç¬¦é”®
    if ("+-Ã—Ã·%".contains(text)) {
        return ButtonType.OPERATOR;
    }
    
    // 4. AC å’Œ DEL â†’ ç‰¹æ®ŠåŠŸèƒ½é”®
    if (text.equals("AC") || text.equals("DEL")) {
        return ButtonType.SPECIAL;
    }
    
    // 5. å…¶ä»– â†’ å‡½æ•°é”®
    return ButtonType.FUNCTION;
}
```

**æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š**
```java
"[0-9.]"  // åŒ¹é…ï¼š
// [0-9] â†’ ä»»æ„æ•°å­— 0-9
// .     â†’ å°æ•°ç‚¹

// ç¤ºä¾‹ï¼š
"5".matches("[0-9.]")    // true
".".matches("[0-9.]")    // true
"sin".matches("[0-9.]")  // false
```

### ğŸ–±ï¸ createStyledButton() - åˆ›å»ºæ ·å¼åŒ–æŒ‰é’®

```java
private JButton createStyledButton(String text, ButtonType type) {
    // 1. åˆ›å»ºæŒ‰é’®å¯¹è±¡
    JButton button = new JButton(text);
    
    // 2. è®¾ç½®å­—ä½“å’Œå¤–è§‚
    button.setFont(new Font("Arial", Font.BOLD, 13));
    button.setFocusPainted(false);  // ä¸æ˜¾ç¤ºç„¦ç‚¹æ¡†
    button.setCursor(new Cursor(Cursor.HAND_CURSOR));  // æ‰‹å‹å…‰æ ‡
    
    // 3. æ ¹æ®ç±»å‹è®¾ç½®é¢œè‰²
    Color bgColor;
    if (type == ButtonType.NUMBER) {
        bgColor = new Color(75, 75, 75);      // æ·±ç°è‰²
    } else if (type == ButtonType.OPERATOR) {
        bgColor = new Color(200, 100, 40);    // æ©™è‰²
    } else if (type == ButtonType.FUNCTION) {
        bgColor = new Color(40, 100, 180);    // è“è‰²
    } else if (type == ButtonType.SPECIAL) {
        bgColor = new Color(180, 40, 40);     // çº¢è‰²
    } else if (type == ButtonType.EQUALS) {
        bgColor = new Color(40, 150, 40);     // ç»¿è‰²
    } else {
        bgColor = new Color(120, 40, 150);    // ç´«è‰²ï¼ˆå†…å­˜ï¼‰
    }
    
    // 4. åº”ç”¨é¢œè‰²
    button.setBackground(bgColor);
    button.setForeground(Color.WHITE);  // ç™½è‰²æ–‡å­—
    button.setBorder(new EmptyBorder(8, 12, 8, 12));  // å†…è¾¹è·
    
    // 5. æ·»åŠ é¼ æ ‡æ‚¬åœæ•ˆæœ
    button.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseEntered(MouseEvent e) {
            // é¼ æ ‡è¿›å…¥ â†’ é¢œè‰²å˜äº®
            button.setBackground(bgColor.brighter());
        }
        
        @Override
        public void mouseExited(MouseEvent e) {
            // é¼ æ ‡ç¦»å¼€ â†’ æ¢å¤åŸè‰²
            button.setBackground(bgColor);
        }
    });
    
    // 6. æ·»åŠ ç‚¹å‡»äº‹ä»¶
    button.addActionListener(e -> handleButtonClick(text));
    
    return button;
}
```

**Color.brighter() åŸç†ï¼š**
```java
// åŸå§‹é¢œè‰²
Color original = new Color(100, 100, 100);

// å˜äº®ï¼ˆæ¯ä¸ª RGB å€¼ Ã— 1.4ï¼‰
Color brighter = original.brighter();
// ç»“æœ: (140, 140, 140)

// å˜æš—
Color darker = original.darker();
// ç»“æœ: (70, 70, 70)
```

### âš™ï¸ handleButtonClick() - å¤„ç†æŒ‰é’®ç‚¹å‡»

```java
private void handleButtonClick(String text) {
    // 1. è·å–å½“å‰æ˜¾ç¤ºå†…å®¹
    String current = display.getText().trim();
    
    // 2. æ ¹æ®æŒ‰é’®æ–‡æœ¬æ‰§è¡Œä¸åŒæ“ä½œ
    if (text.equals("AC")) {
        // å…¨éƒ¨æ¸…é™¤
        display.setText("0");
        statusLabel.setText("DEG | M: " + engine.getMemory());
        
    } else if (text.equals("DEL")) {
        // åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦
        if (current.length() > 1) {
            display.setText(current.substring(0, current.length() - 1));
        } else {
            display.setText("0");
        }
        
    } else if (text.equals("=")) {
        // è®¡ç®—ç»“æœ
        try {
            String result = engine.calculate(current);
            display.setText(result);
            statusLabel.setText("DEG | M: " + engine.getMemory());
        } catch (Exception ex) {
            display.setText("é”™è¯¯: " + ex.getMessage());
        }
        
    } else if (text.equals("ANS")) {
        // æ’å…¥ä¸Šæ¬¡ç»“æœ
        if (current.equals("0")) {
            display.setText(engine.getLastAnswer());
        } else {
            display.setText(current + engine.getLastAnswer());
        }
        
    } else if (text.equals("MC")) {
        // æ¸…é™¤å†…å­˜
        engine.memoryClear();
        statusLabel.setText("DEG | M: 0");
        
    } else if (text.equals("MR")) {
        // è¯»å–å†…å­˜
        display.setText(String.valueOf(engine.memoryRecall()));
        
    } else if (text.equals("M+") || text.equals("M-") || text.equals("MS")) {
        // å†…å­˜è¿ç®—
        try {
            double val = Double.parseDouble(current);
            if (text.equals("M+")) {
                engine.memoryAdd(val);
            } else if (text.equals("M-")) {
                engine.memorySubtract(val);
            } else {
                engine.memoryStore(val);
            }
            statusLabel.setText("DEG | M: " + engine.getMemory());
        } catch (NumberFormatException ex) {
            display.setText("é”™è¯¯: æ— æ•ˆæ•°å­—");
        }
        
    } else {
        // é»˜è®¤ï¼šè¿½åŠ æ–‡æœ¬
        if (current.equals("0") || current.startsWith("é”™è¯¯")) {
            display.setText(text);
        } else {
            display.setText(current + text);
        }
    }
}
```

**æ‰§è¡Œæµç¨‹ç¤ºä¾‹ï¼š**
```
ç”¨æˆ·ç‚¹å‡» "7" æŒ‰é’®
    â†“
è§¦å‘ ActionListener
    â†“
è°ƒç”¨ handleButtonClick("7")
    â†“
æ£€æŸ¥ text.equals("7") â†’ è¿›å…¥ else åˆ†æ”¯
    â†“
current = "0" â†’ æ˜¾ç¤º "7"
```

### ğŸ”¢ createMatrixPanel() - åˆ›å»ºçŸ©é˜µé¢æ¿

```java
private JPanel createMatrixPanel() {
    // 1. åˆ›å»ºä¸»é¢æ¿
    JPanel panel = new JPanel(new BorderLayout(10, 10));
    panel.setBackground(new Color(40, 40, 40));
    panel.setBorder(new EmptyBorder(12, 12, 12, 12));
    
    // 2. åˆ›å»ºçŸ©é˜µè¾“å…¥åŒºåŸŸï¼ˆå¹¶æ’æ˜¾ç¤ºï¼‰
    JPanel matricesPanel = new JPanel(new GridLayout(1, 2, 15, 0));
    matricesPanel.setBackground(new Color(40, 40, 40));
    
    // 3. æ·»åŠ ä¸¤ä¸ªçŸ©é˜µè¾“å…¥é¢æ¿
    matricesPanel.add(createMatrixInput("çŸ©é˜µ A", matrixAFields));
    matricesPanel.add(createMatrixInput("çŸ©é˜µ B", matrixBFields));
    
    // 4. åˆ›å»ºæ“ä½œæŒ‰é’®ï¼ˆ2è¡Œ3åˆ—ï¼‰
    JPanel opsPanel = new JPanel(new GridLayout(2, 3, 6, 6));
    opsPanel.setBackground(new Color(40, 40, 40));
    opsPanel.setBorder(new EmptyBorder(10, 0, 0, 0));
    
    String[] operations = {"A + B", "A - B", "A Ã— B", "det(A)", "Aâ»Â¹", "Aáµ€"};
    
    for (String op : operations) {
        JButton btn = createStyledButton(op, ButtonType.OPERATOR);
        // ä¸ºæ¯ä¸ªæŒ‰é’®æ·»åŠ çŸ©é˜µè¿ç®—çš„ç‚¹å‡»äº‹ä»¶
        btn.addActionListener(e -> performMatrixOperation(op));
        opsPanel.add(btn);
    }
    
    panel.add(matricesPanel, BorderLayout.CENTER);
    panel.add(opsPanel, BorderLayout.SOUTH);
    
    return panel;
}
```

**å¸ƒå±€æ•ˆæœï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  çŸ©é˜µ A   â”‚    â”‚  çŸ©é˜µ B   â”‚     â”‚  CENTER
â”‚  â”‚ [  ] [  ] â”‚    â”‚ [  ] [  ] â”‚     â”‚
â”‚  â”‚ [  ] [  ] â”‚    â”‚ [  ] [  ] â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [A+B] [A-B] [AÃ—B]                  â”‚  SOUTH
â”‚  [det] [Aâ»Â¹] [Aáµ€]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š createMatrixInput() - åˆ›å»ºçŸ©é˜µè¾“å…¥æ¡†

```java
private JPanel createMatrixInput(String title, JTextField[][] fields) {
    // 1. åˆ›å»ºå¸¦æ ‡é¢˜çš„é¢æ¿
    JPanel panel = new JPanel(new BorderLayout(8, 8));
    panel.setBackground(new Color(55, 55, 55));
    
    // 2. è®¾ç½®æ ‡é¢˜è¾¹æ¡†
    panel.setBorder(new TitledBorder(
        new LineBorder(Color.GRAY, 2),  // è¾¹æ¡†çº¿
        title,                           // æ ‡é¢˜æ–‡å­—
        TitledBorder.LEFT,              // å·¦å¯¹é½
        TitledBorder.TOP,               // é¡¶éƒ¨
        new Font("Arial", Font.BOLD, 14), // å­—ä½“
        Color.WHITE                      // é¢œè‰²
    ));
    
    // 3. åˆ›å»º 3Ã—3 ç½‘æ ¼é¢æ¿
    JPanel gridPanel = new JPanel(new GridLayout(3, 3, 6, 6));
    gridPanel.setBackground(new Color(55, 55, 55));
    gridPanel.setBorder(new EmptyBorder(10, 10, 10, 10));
    
    // 4. åˆ›å»º 9 ä¸ªè¾“å…¥æ¡†ï¼ˆ3è¡Œ Ã— 3åˆ—ï¼‰
    for (int i = 0; i < 3; i++) {           // è¡Œ
        for (int j = 0; j < 3; j++) {       // åˆ—
            // åˆ›å»ºæ–‡æœ¬æ¡†
            fields[i][j] = new JTextField("0");
            fields[i][j].setFont(new Font("Consolas", Font.BOLD, 16));
            fields[i][j].setHorizontalAlignment(JTextField.CENTER);
            fields[i][j].setBackground(new Color(70, 70, 70));
            fields[i][j].setForeground(Color.WHITE);
            fields[i][j].setCaretColor(Color.WHITE);
            
            // æ·»åŠ åˆ°ç½‘æ ¼
            gridPanel.add(fields[i][j]);
        }
    }
    
    panel.add(gridPanel, BorderLayout.CENTER);
    return panel;
}
```

**äºŒç»´æ•°ç»„ç´¢å¼•è¯´æ˜ï¼š**
```java
fields[i][j]
       â†‘  â†‘
       è¡Œ åˆ—

fields[0][0]  fields[0][1]  fields[0][2]
fields[1][0]  fields[1][1]  fields[1][2]
fields[2][0]  fields[2][1]  fields[2][2]

// å¯¹åº”çŸ©é˜µï¼š
â”Œ                    â”
â”‚ [0][0]  [0][1]  [0][2] â”‚
â”‚ [1][0]  [1][1]  [1][2] â”‚
â”‚ [2][0]  [2][1]  [2][2] â”‚
â””                    â”˜
```

### ğŸ§® performMatrixOperation() - æ‰§è¡ŒçŸ©é˜µè¿ç®—

```java
private void performMatrixOperation(String operation) {
    try {
        // 1. ä»è¾“å…¥æ¡†è¯»å–çŸ©é˜µæ•°æ®
        double[][] matrixA = readMatrix(matrixAFields);
        double[][] matrixB = readMatrix(matrixBFields);
        
        // 2. è°ƒç”¨çŸ©é˜µè®¡ç®—å™¨æ‰§è¡Œè¿ç®—
        String result = MatrixCalculator.performOperation(
            operation,   // è¿ç®—ç±»å‹
            matrixA,     // çŸ©é˜µ A
            matrixB      // çŸ©é˜µ B
        );
        
        // 3. æ˜¾ç¤ºç»“æœ
        display.setText(result);
        
    } catch (Exception ex) {
        // 4. é”™è¯¯å¤„ç†
        display.setText("çŸ©é˜µé”™è¯¯: " + ex.getMessage());
    }
}
```

**æ‰§è¡Œæµç¨‹ï¼š**
```
ç”¨æˆ·ç‚¹å‡» "A + B"
    â†“
performMatrixOperation("A + B")
    â†“
readMatrix(matrixAFields) â†’ [[1,2,3], [4,5,6], [7,8,9]]
readMatrix(matrixBFields) â†’ [[9,8,7], [6,5,4], [3,2,1]]
    â†“
MatrixCalculator.performOperation(...)
    â†“
ç»“æœæ˜¾ç¤ºåœ¨ display
```

### ğŸ“– readMatrix() - è¯»å–çŸ©é˜µæ•°æ®

```java
private double[][] readMatrix(JTextField[][] fields) throws NumberFormatException {
    // åˆ›å»º 3Ã—3 äºŒç»´æ•°ç»„å­˜å‚¨çŸ©é˜µ
    double[][] matrix = new double[3][3];
    
    // éå†æ‰€æœ‰è¾“å…¥æ¡†
    for (int i = 0; i < 3; i++) {           // è¡Œå¾ªç¯
        for (int j = 0; j < 3; j++) {       // åˆ—å¾ªç¯
            // è¯»å–æ–‡æœ¬æ¡†çš„å€¼å¹¶è½¬æ¢ä¸º double
            String text = fields[i][j].getText().trim();
            matrix[i][j] = Double.parseDouble(text);
        }
    }
    
    return matrix;
}
```

**å¼‚å¸¸å¤„ç†è¯´æ˜ï¼š**
```java
// å¦‚æœç”¨æˆ·è¾“å…¥ "abc"
Double.parseDouble("abc")  // æŠ›å‡º NumberFormatException

// try-catch æ•è·å¼‚å¸¸
try {
    double val = Double.parseDouble("abc");
} catch (NumberFormatException ex) {
    System.out.println("è¾“å…¥ä¸æ˜¯æœ‰æ•ˆæ•°å­—ï¼");
}
```

---

## CalculatorEngine è®¡ç®—å¼•æ“è¯¦è§£

### ğŸ“‹ ç±»æˆå‘˜å˜é‡

```java
public class CalculatorEngine {
    // å†…å­˜å­˜å‚¨å™¨ï¼ˆM é”®åŠŸèƒ½ï¼‰
    private double memory = 0;
    
    // ä¸Šæ¬¡è®¡ç®—ç»“æœï¼ˆANS é”®åŠŸèƒ½ï¼‰
    private String lastAnswer = "0";
}
```

### ğŸ§® calculate() - æ ¸å¿ƒè®¡ç®—æ–¹æ³•

```java
public String calculate(String expression) throws Exception {
    // 1. è¾“å…¥éªŒè¯
    if (expression == null || expression.trim().isEmpty()) {
        throw new IllegalArgumentException("è¡¨è¾¾å¼ä¸èƒ½ä¸ºç©º");
    }
    
    // 2. é¢„å¤„ç†è¡¨è¾¾å¼ï¼ˆæ›¿æ¢ç‰¹æ®Šç¬¦å·ï¼‰
    expression = preprocessExpression(expression);
    
    try {
        // 3. ä½¿ç”¨ exp4j åº“è§£æè¡¨è¾¾å¼
        Expression exp = new ExpressionBuilder(expression).build();
        
        // 4. è®¡ç®—ç»“æœ
        double result = exp.evaluate();
        
        // 5. æ£€æŸ¥ç»“æœæœ‰æ•ˆæ€§
        if (Double.isNaN(result)) {
            throw new ArithmeticException("ç»“æœæœªå®šä¹‰");
        }
        if (Double.isInfinite(result)) {
            throw new ArithmeticException("ç»“æœä¸ºæ— ç©·å¤§");
        }
        
        // 6. æ ¼å¼åŒ–å¹¶ä¿å­˜ç»“æœ
        lastAnswer = formatResult(result);
        return lastAnswer;
        
    } catch (Exception e) {
        throw new Exception("è®¡ç®—é”™è¯¯: " + e.getMessage());
    }
}
```

**æ‰§è¡Œæµç¨‹ç¤ºä¾‹ï¼š**
```
è¾“å…¥: "2 + 3 Ã— 4"
    â†“
preprocessExpression() â†’ "2 + 3 * 4"
    â†“
ExpressionBuilder è§£æ â†’ è¡¨è¾¾å¼æ ‘
                         +
                        / \
                       2   Ã—
                          / \
                         3   4
    â†“
evaluate() â†’ 14
    â†“
formatResult(14) â†’ "14"
```

### ğŸ”„ preprocessExpression() - é¢„å¤„ç†è¡¨è¾¾å¼

```java
private String preprocessExpression(String expr) {
    // 1. æ›¿æ¢ä¹˜å·ï¼ˆÃ— â†’ *ï¼‰
    expr = expr.replace("Ã—", "*");
    
    // 2. æ›¿æ¢é™¤å·ï¼ˆÃ· â†’ /ï¼‰
    expr = expr.replace("Ã·", "/");
    
    // 3. æ›¿æ¢åœ†å‘¨ç‡ï¼ˆÏ€ â†’ 3.141592...ï¼‰
    expr = expr.replace("Ï€", String.valueOf(Math.PI));
    
    // 4. æ›¿æ¢è‡ªç„¶å¯¹æ•°åº•ï¼ˆe â†’ 2.718281...ï¼‰
    expr = expr.replace("e", String.valueOf(Math.E));
    
    // 5. æ›¿æ¢è´Ÿå·ï¼ˆ(âˆ’) â†’ (-1)ï¼‰
    expr = expr.replace("(âˆ’)", "(-1)");
    
    return expr;
}
```

**æ›¿æ¢åŸå› ï¼š**
```java
// exp4j åº“åªè®¤è¯†æ ‡å‡†ç¬¦å·
"2 Ã— 3"  // âŒ exp4j ä¸è®¤è¯† Ã—
"2 * 3"  // âœ… æ­£ç¡®

// å¸¸æ•°æ›¿æ¢
"Ï€"      // âŒ å­—ç¬¦ä¸²
"3.141592653589793"  // âœ… æ•°å­—
```

### ğŸ¨ formatResult() - æ ¼å¼åŒ–ç»“æœ

```java
private String formatResult(double result) {
    // 1. æ£€æŸ¥æ˜¯å¦ä¸ºæ•´æ•°
    if (Math.abs(result - Math.round(result)) < 1e-10) {
        // æ˜¯æ•´æ•° â†’ æ˜¾ç¤ºä¸ºé•¿æ•´å‹
        return String.valueOf((long) Math.round(result));
    }
    
    // 2. å°æ•° â†’ æ ¼å¼åŒ–ä¸º 6 ä½å°æ•°
    return String.format("%.6f", result)
        .replaceAll("0+$", "")      // å»æ‰æœ«å°¾çš„ 0
        .replaceAll("\\.$", "");    // å»æ‰æœ«å°¾çš„å°æ•°ç‚¹
}
```

**æ ¼å¼åŒ–ç¤ºä¾‹ï¼š**
```java
formatResult(10.0)      // "10"     (æ•´æ•°)
formatResult(10.5)      // "10.5"   (å»æ‰æœ«å°¾0)
formatResult(3.141592)  // "3.141592"
formatResult(0.100000)  // "0.1"    (å»æ‰æœ«å°¾0)
```

**æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š**
```java
"0+$"    // åŒ¹é…æœ«å°¾çš„ä¸€ä¸ªæˆ–å¤šä¸ª 0
         // 0+ â†’ ä¸€ä¸ªæˆ–å¤šä¸ª 0
         // $  â†’ å­—ç¬¦ä¸²æœ«å°¾

"\\.$"   // åŒ¹é…æœ«å°¾çš„å°æ•°ç‚¹
         // \\. â†’ è½¬ä¹‰çš„ç‚¹ï¼ˆ.åœ¨æ­£åˆ™ä¸­æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼‰
         // $   â†’ å­—ç¬¦ä¸²æœ«å°¾

// ç¤ºä¾‹ï¼š
"10.500000".replaceAll("0+$", "")   // "10.5"
"10.".replaceAll("\\.$", "")         // "10"
```

### ğŸ” solveEquation() - æ–¹ç¨‹æ±‚è§£

```java
public String solveEquation(String equation) throws Exception {
    // 1. éªŒè¯æ–¹ç¨‹æ ¼å¼
    if (!equation.contains("=")) {
        throw new IllegalArgumentException("æ–¹ç¨‹å¿…é¡»åŒ…å«ç­‰å·");
    }
    
    // 2. åˆ†å‰²æ–¹ç¨‹ï¼ˆæŒ‰ = åˆ†å‰²ï¼‰
    String[] parts = equation.split("=");
    if (parts.length != 2) {
        throw new IllegalArgumentException("æ–¹ç¨‹æ ¼å¼é”™è¯¯");
    }
    
    // 3. æå–å·¦å³ä¸¤è¾¹
    String left = parts[0].trim();   // å·¦è¾¹è¡¨è¾¾å¼
    String right = parts[1].trim();  // å³è¾¹è¡¨è¾¾å¼
    
    // 4. æ•°å€¼æ±‚è§£æ³•ï¼ˆæš´åŠ›æœç´¢ï¼‰
    for (double x = -100; x <= 100; x += 0.1) {
        try {
            // 4.1 æ›¿æ¢ x ä¸ºå…·ä½“å€¼
            String leftExpr = left.replace("x", "(" + x + ")");
            String rightExpr = right.replace("x", "(" + x + ")");
            
            // 4.2 è®¡ç®—å·¦å³ä¸¤è¾¹çš„å€¼
            Expression expLeft = new ExpressionBuilder(leftExpr).build();
            Expression expRight = new ExpressionBuilder(rightExpr).build();
            
            double valLeft = expLeft.evaluate();
            double valRight = expRight.evaluate();
            
            // 4.3 æ£€æŸ¥æ˜¯å¦ç›¸ç­‰ï¼ˆè¯¯å·® < 0.001ï¼‰
            if (Math.abs(valLeft - valRight) < 0.001) {
                return "è§£: x â‰ˆ " + formatResult(x);
            }
        } catch (Exception ignored) {
            // æŸäº› x å€¼å¯èƒ½å¯¼è‡´è®¡ç®—é”™è¯¯ï¼ˆå¦‚é™¤ä»¥0ï¼‰ï¼Œå¿½ç•¥ç»§ç»­
        }
    }
    
    // 5. æœªæ‰¾åˆ°è§£
    return "åœ¨èŒƒå›´ [-100, 100] å†…æœªæ‰¾åˆ°è§£";
}
```

**æ±‚è§£æµç¨‹ç¤ºä¾‹ï¼š**
```
æ–¹ç¨‹: 2*x + 3 = 7
    â†“
åˆ†å‰²: left = "2*x + 3", right = "7"
    â†“
x = -100 â†’ è®¡ç®—å·¦è¾¹ = -197, å³è¾¹ = 7  âŒ ä¸ç›¸ç­‰
x = -99.9 â†’ ...                      âŒ
...
x = 2.0 â†’ è®¡ç®—å·¦è¾¹ = 7, å³è¾¹ = 7     âœ… ç›¸ç­‰ï¼
    â†“
è¿”å› "è§£: x â‰ˆ 2"
```

**ä¸ºä»€ä¹ˆç”¨ 0.1 æ­¥é•¿ï¼Ÿ**
```java
for (double x = -100; x <= 100; x += 0.1)
// æ­¥é•¿å¤ªå¤§ â†’ å¯èƒ½è·³è¿‡è§£
// æ­¥é•¿å¤ªå° â†’ è®¡ç®—æ—¶é—´é•¿

// æ­¥é•¿ 0.1 çš„æœç´¢æ¬¡æ•°ï¼š
// (-100 åˆ° 100) Ã· 0.1 = 2000 æ¬¡
// å¯¹äºç°ä»£è®¡ç®—æœºï¼Œè¿™ä¸ªæ¬¡æ•°å¯ä»¥æ¥å—
```

### ğŸ’¾ å†…å­˜æ“ä½œæ–¹æ³•

```java
// æ¸…é™¤å†…å­˜
public void memoryClear() {
    memory = 0;
}

// è¯»å–å†…å­˜
public double memoryRecall() {
    return memory;
}

// å†…å­˜åŠ æ³•
public void memoryAdd(double value) {
    memory += value;  // memory = memory + value
}

// å†…å­˜å‡æ³•
public void memorySubtract(double value) {
    memory -= value;  // memory = memory - value
}

// å­˜å‚¨åˆ°å†…å­˜
public void memoryStore(double value) {
    memory = value;
}

// è·å–å†…å­˜å€¼ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰
public double getMemory() {
    return memory;
}

// è·å–ä¸Šæ¬¡ç»“æœ
public String getLastAnswer() {
    return lastAnswer;
}
```

**å†…å­˜æ“ä½œç¤ºä¾‹ï¼š**
```java
// åˆå§‹: memory = 0
memoryClear();         // memory = 0

memoryStore(100);      // memory = 100
memoryAdd(50);         // memory = 150
memorySubtract(20);    // memory = 130
memoryRecall();        // è¿”å› 130
```

---

## MatrixCalculator çŸ©é˜µè®¡ç®—å™¨è¯¦è§£

### ğŸ§® performOperation() - æ‰§è¡ŒçŸ©é˜µè¿ç®—

```java
public static String performOperation(
    String operation,      // è¿ç®—ç±»å‹
    double[][] matrixA,    // çŸ©é˜µ A
    double[][] matrixB     // çŸ©é˜µ B
) {
    try {
        // 1. å°† Java æ•°ç»„è½¬æ¢ä¸º EJML çŸ©é˜µå¯¹è±¡
        SimpleMatrix A = new SimpleMatrix(matrixA);
        SimpleMatrix B = new SimpleMatrix(matrixB);
        
        // 2. ç”¨äºå­˜å‚¨ç»“æœçš„çŸ©é˜µ
        SimpleMatrix result;
        
        // 3. æ ¹æ®è¿ç®—ç±»å‹æ‰§è¡Œç›¸åº”æ“ä½œ
        if (operation.equals("A + B")) {
            // çŸ©é˜µåŠ æ³•
            result = A.plus(B);
            return matrixToString(result);
            
        } else if (operation.equals("A - B")) {
            // çŸ©é˜µå‡æ³•
            result = A.minus(B);
            return matrixToString(result);
            
        } else if (operation.equals("A Ã— B")) {
            // çŸ©é˜µä¹˜æ³•
            result = A.mult(B);
            return matrixToString(result);
            
        } else if (operation.equals("det(A)")) {
            // è¡Œåˆ—å¼
            double det = A.determinant();
            return "det(A) = " + String.format("%.4f", det);
            
        } else if (operation.equals("Aâ»Â¹")) {
            // é€†çŸ©é˜µ
            result = A.invert();
            return matrixToString(result);
            
        } else if (operation.equals("Aáµ€")) {
            // è½¬ç½®çŸ©é˜µ
            result = A.transpose();
            return matrixToString(result);
        }
        
        return "æœªçŸ¥æ“ä½œ";
        
    } catch (Exception e) {
        return "é”™è¯¯: " + e.getMessage();
    }
}
```

**çŸ©é˜µè¿ç®—æ•°å­¦åŸç†ï¼š**

```
1. çŸ©é˜µåŠ æ³•ï¼ˆå¯¹åº”å…ƒç´ ç›¸åŠ ï¼‰
   [1 2]   [5 6]   [1+5 2+6]   [6  8]
   [3 4] + [7 8] = [3+7 4+8] = [10 12]

2. çŸ©é˜µå‡æ³•ï¼ˆå¯¹åº”å…ƒç´ ç›¸å‡ï¼‰
   [5 6]   [1 2]   [5-1 6-2]   [4 4]
   [7 8] - [3 4] = [7-3 8-4] = [4 4]

3. çŸ©é˜µä¹˜æ³•ï¼ˆè¡ŒÃ—åˆ—ï¼‰
   [1 2]   [5 6]   [1Ã—5+2Ã—7  1Ã—6+2Ã—8]   [19 22]
   [3 4] Ã— [7 8] = [3Ã—5+4Ã—7  3Ã—6+4Ã—8] = [43 50]

4. è¡Œåˆ—å¼ï¼ˆdetï¼‰
   det([1 2]) = 1Ã—4 - 2Ã—3 = -2
      [3 4]

5. é€†çŸ©é˜µï¼ˆAâ»Â¹ï¼‰
   A Ã— Aâ»Â¹ = Iï¼ˆå•ä½çŸ©é˜µï¼‰
   
6. è½¬ç½®ï¼ˆAáµ€ï¼‰- è¡Œåˆ—äº’æ¢
   [1 2 3]áµ€   [1 4]
   [4 5 6]  = [2 5]
              [3 6]
```

### ğŸ“ matrixToString() - çŸ©é˜µè½¬å­—ç¬¦ä¸²

```java
private static String matrixToString(SimpleMatrix matrix) {
    StringBuilder sb = new StringBuilder();
    
    // éå†çŸ©é˜µçš„æ¯ä¸€è¡Œ
    for (int i = 0; i < matrix.numRows(); i++) {
        sb.append("[");
        
        // éå†å½“å‰è¡Œçš„æ¯ä¸€åˆ—
        for (int j = 0; j < matrix.numCols(); j++) {
            // è·å–å…ƒç´ å€¼å¹¶æ ¼å¼åŒ–ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰
            double value = matrix.get(i, j);
            sb.append(String.format("%.2f", value));
            
            // å¦‚æœä¸æ˜¯æœ€åä¸€åˆ—ï¼Œæ·»åŠ é€—å·
            if (j < matrix.numCols() - 1) {
                sb.append(", ");
            }
        }
        
        sb.append("]\n");  // è¡Œç»“æŸï¼Œæ¢è¡Œ
    }
    
    return sb.toString();
}
```

**StringBuilder è¯´æ˜ï¼š**
```java
// ä¸ºä»€ä¹ˆä¸ç”¨ String ç›´æ¥æ‹¼æ¥ï¼Ÿ
String result = "";
for (int i = 0; i < 1000; i++) {
    result += i;  // âŒ æ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡ï¼Œæ•ˆç‡ä½
}

// ä½¿ç”¨ StringBuilder
StringBuilder sb = new StringBuilder();
for (int i = 0; i < 1000; i++) {
    sb.append(i);  // âœ… åœ¨åŸå¯¹è±¡ä¸Šä¿®æ”¹ï¼Œæ•ˆç‡é«˜
}
String result = sb.toString();
```

**è¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼š**
```java
// çŸ©é˜µï¼š
// [1.5  2.3]
// [3.7  4.1]

// è¾“å‡ºå­—ç¬¦ä¸²ï¼š
[1.50, 2.30]
[3.70, 4.10]
```

---

## GraphPlotter å›¾å½¢ç»˜åˆ¶å™¨è¯¦è§£

### ğŸ“Š æ„é€ å‡½æ•° - åˆ›å»ºå›¾å½¢çª—å£

```java
public class GraphPlotter extends JFrame {
    
    public GraphPlotter(String function) {
        // 1. è®¾ç½®çª—å£å±æ€§
        setTitle("å‡½æ•°å›¾å½¢: " + function);
        setSize(800, 600);
        setLocationRelativeTo(null);  // å±…ä¸­æ˜¾ç¤º
        
        // 2. åˆ›å»ºæ•°æ®ç³»åˆ—ï¼ˆå­˜å‚¨ x-y åæ ‡ç‚¹ï¼‰
        XYSeries series = new XYSeries(function);
        
        try {
            // 3. è®¡ç®—å‡½æ•°å€¼ï¼ˆx ä» -10 åˆ° 10ï¼Œæ­¥é•¿ 0.1ï¼‰
            for (double x = -10; x <= 10; x += 0.1) {
                // 3.1 åˆ›å»ºè¡¨è¾¾å¼å¹¶è®¾ç½®å˜é‡ x
                Expression exp = new ExpressionBuilder(function)
                    .variable("x")       // å£°æ˜å˜é‡
                    .build()
                    .setVariable("x", x); // è®¾ç½® x çš„å€¼
                
                // 3.2 è®¡ç®— y å€¼
                double y = exp.evaluate();
                
                // 3.3 éªŒè¯ç»“æœï¼ˆè¿‡æ»¤æ— æ•ˆå€¼ï¼‰
                if (!Double.isNaN(y) &&          // ä¸æ˜¯ NaN
                    !Double.isInfinite(y) &&     // ä¸æ˜¯æ— ç©·å¤§
                    Math.abs(y) < 1000) {        // ç»å¯¹å€¼ < 1000
                    
                    // 3.4 æ·»åŠ ç‚¹åˆ°æ•°æ®ç³»åˆ—
                    series.add(x, y);
                }
            }
        } catch (Exception e) {
            // 4. é”™è¯¯å¤„ç†
            JOptionPane.showMessageDialog(
                this,
                "å‡½æ•°è§£æé”™è¯¯: " + e.getMessage()
            );
        }
        
        // 5. åˆ›å»ºæ•°æ®é›†
        XYSeriesCollection dataset = new XYSeriesCollection(series);
        
        // 6. åˆ›å»ºå›¾è¡¨
        JFreeChart chart = ChartFactory.createXYLineChart(
            "y = " + function,  // å›¾è¡¨æ ‡é¢˜
            "x",                // x è½´æ ‡ç­¾
            "y",                // y è½´æ ‡ç­¾
            dataset             // æ•°æ®é›†
        );
        
        // 7. åˆ›å»ºå›¾è¡¨é¢æ¿å¹¶è®¾ç½®ä¸ºå†…å®¹é¢æ¿
        ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new Dimension(800, 600));
        setContentPane(chartPanel);
    }
}
```

**ç»˜å›¾æµç¨‹ï¼š**
```
ç”¨æˆ·è¾“å…¥: "sin(x)"
    â†“
å¾ªç¯: x = -10, -9.9, -9.8, ..., 9.9, 10
    â†“
æ¯æ¬¡å¾ªç¯:
  x = -10 â†’ y = sin(-10) = 0.544  âœ“ æœ‰æ•ˆ
  x = -9.9 â†’ y = sin(-9.9) = 0.529 âœ“ æœ‰æ•ˆ
  ...
    â†“
æ”¶é›†æ‰€æœ‰ (x, y) ç‚¹
    â†“
JFreeChart ç»˜åˆ¶æ›²çº¿
    â†“
æ˜¾ç¤ºå›¾å½¢çª—å£
```

**ä¸ºä»€ä¹ˆè¿‡æ»¤ y å€¼ï¼Ÿ**
```java
// 1. NaN (Not a Number) - æœªå®šä¹‰
sqrt(-1)  // NaN

// 2. Infinite - æ— ç©·å¤§
1 / 0     // Infinity

// 3. å€¼å¤ªå¤§
exp(1000) // è¶…å‡ºæ˜¾ç¤ºèŒƒå›´

// è¿‡æ»¤æ¡ä»¶ï¼š
if (!Double.isNaN(y) &&          // æ’é™¤ NaN
    !Double.isInfinite(y) &&     // æ’é™¤æ— ç©·
    Math.abs(y) < 1000) {        // æ’é™¤è¶…å¤§å€¼
    series.add(x, y);             // åªæ·»åŠ æœ‰æ•ˆç‚¹
}
```

---

## å…³é”®æŠ€æœ¯æ·±å…¥è§£æ

### 1. exp4j è¡¨è¾¾å¼è§£æåŸç†

**ä»€ä¹ˆæ˜¯ exp4jï¼Ÿ**
- ä¸€ä¸ªè½»é‡çº§çš„æ•°å­¦è¡¨è¾¾å¼è§£æåº“
- å¯ä»¥å°†å­—ç¬¦ä¸²è¡¨è¾¾å¼è½¬æ¢ä¸ºå¯è®¡ç®—çš„å¯¹è±¡

**åŸºæœ¬ç”¨æ³•ï¼š**
```java
// 1. ç®€å•è¡¨è¾¾å¼
Expression exp = new ExpressionBuilder("2 + 3").build();
double result = exp.evaluate();  // 5.0

// 2. å¸¦å˜é‡çš„è¡¨è¾¾å¼
Expression exp = new ExpressionBuilder("x * 2 + y")
    .variables("x", "y")  // å£°æ˜å˜é‡
    .build()
    .setVariable("x", 10)  // x = 10
    .setVariable("y", 5);  // y = 5
double result = exp.evaluate();  // 25.0

// 3. å¸¦å‡½æ•°çš„è¡¨è¾¾å¼
Expression exp = new ExpressionBuilder("sin(x) + cos(x)")
    .variables("x")
    .build()
    .setVariable("x", Math.PI / 4);
double result = exp.evaluate();  // 1.414...
```

**è§£æè¿‡ç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š**
```
"2 + 3 * 4"
    â†“ è¯æ³•åˆ†æ
[2] [+] [3] [*] [4]
    â†“ è¯­æ³•åˆ†æ
        +
       / \
      2   *
         / \
        3   4
    â†“ è®¡ç®—
2 + (3 * 4) = 14
```

### 2. EJML çŸ©é˜µåº“åŸç†

**EJML (Efficient Java Matrix Library)**
- é«˜æ€§èƒ½çš„ Java çŸ©é˜µè¿ç®—åº“
- é’ˆå¯¹çŸ©é˜µè¿ç®—è¿›è¡Œäº†ä¼˜åŒ–

**SimpleMatrix ç±»ï¼š**
```java
// 1. åˆ›å»ºçŸ©é˜µ